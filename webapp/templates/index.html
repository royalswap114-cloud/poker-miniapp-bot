<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>í¬ì»¤ì»¤ë®¤ë‹ˆí‹°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Swiper CSS (CDN) -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
    />
    <link rel="stylesheet" href="/static/css/style.css" />
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì¦‰ì‹œ URL íŒŒë¼ë¯¸í„°ë¥¼ í”„ë¡œí•„ ë§í¬ì— ì¶”ê°€ (ì¦‰ì‹œ ì‹¤í–‰)
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const paramsString = urlParams.toString();
            
            console.log('í˜„ì¬ URL íŒŒë¼ë¯¸í„°:', paramsString);
            
            if (paramsString) {
                // í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í”„ë¡œí•„ ë§í¬
                const navProfileLink = document.getElementById('navProfileLink');
                if (navProfileLink) {
                    navProfileLink.href = '/profile?' + paramsString;
                    console.log('í”„ë¡œí•„ ë§í¬ ì—…ë°ì´íŠ¸:', navProfileLink.href);
                }
                
                // í˜ì´ì§€ ë‚´ ëª¨ë“  /profile ë§í¬ ì—…ë°ì´íŠ¸
                const allProfileLinks = document.querySelectorAll('a[href="/profile"]');
                allProfileLinks.forEach(link => {
                    link.href = '/profile?' + paramsString;
                    console.log('í”„ë¡œí•„ ë§í¬ ë°œê²¬ ë° ì—…ë°ì´íŠ¸:', link.href);
                });
            } else {
                console.warn('âš ï¸ URL íŒŒë¼ë¯¸í„°ê°€ ì—†ìŠµë‹ˆë‹¤!');
            }
        })();
        
        // ëª¨ë“  ë‚´ë¶€ ë§í¬ì— URL íŒŒë¼ë¯¸í„° ìë™ ì¶”ê°€
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const paramsString = urlParams.toString();
            
            if (paramsString) {
                // ëª¨ë“  ìƒëŒ€ ê²½ë¡œ ë§í¬ ì°¾ê¸°
                document.querySelectorAll('a[href^="/"]').forEach(link => {
                    const href = link.getAttribute('href');
                    if (href && !href.includes('?')) {
                        link.href = href + '?' + paramsString;
                        console.log('ë§í¬ ì—…ë°ì´íŠ¸:', href, 'â†’', link.href);
                    }
                });
            }
        });
        
        // ë™ì ìœ¼ë¡œ ìƒì„±ëœ ë§í¬ë¥¼ ìœ„í•œ MutationObserver
        const observer = new MutationObserver(function(mutations) {
            const urlParams = new URLSearchParams(window.location.search);
            const paramsString = urlParams.toString();
            
            if (paramsString) {
                mutations.forEach(function(mutation) {
                    mutation.addedNodes.forEach(function(node) {
                        if (node.nodeType === 1) { // Element ë…¸ë“œ
                            const links = node.querySelectorAll ? node.querySelectorAll('a[href^="/"]') : [];
                            links.forEach(link => {
                                const href = link.getAttribute('href');
                                if (href && !href.includes('?')) {
                                    link.href = href + '?' + paramsString;
                                }
                            });
                        }
                    });
                });
            }
        });
        
        // DOMì´ ì¤€ë¹„ë˜ë©´ observer ì‹œì‘
        if (document.body) {
            observer.observe(document.body, { childList: true, subtree: true });
        } else {
            document.addEventListener('DOMContentLoaded', function() {
                observer.observe(document.body, { childList: true, subtree: true });
            });
        }
    </script>
</head>
<body>
<div id="app">
    <!-- ìƒë‹¨ ë°°ë„ˆ / ìºëŸ¬ì…€ -->
    <header class="banner-carousel">
        <div class="swiper banner-swiper">
            <div class="swiper-wrapper" id="banner-container">
                <!-- JS ê°€ ë°°ë„ˆ ìŠ¬ë¼ì´ë“œ ì±„ì›€ -->
            </div>
            <!-- ì¢Œìš° ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
            <!-- ìœ„ì¹˜ ì¸ë””ì¼€ì´í„° ì  -->
            <div class="swiper-pagination"></div>
        </div>
    </header>

    <!-- ë°© ë¦¬ìŠ¤íŠ¸ (í¬ì»¤ë°© ì¹´ë“œ ëª©ë¡) -->
    <main class="room-list" id="room-list">
        <!-- JS ê°€ ë°© ì¹´ë“œ ë Œë”ë§ -->
        <div class="room-card skeleton">
            <div class="skeleton-title"></div>
            <div class="skeleton-line"></div>
            <div class="skeleton-line short"></div>
            <div class="skeleton-buttons">
                <div class="skeleton-btn"></div>
                <div class="skeleton-btn"></div>
            </div>
        </div>
    </main>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="bottom-nav" id="bottomNav">
        <a href="/" class="nav-item active">
            <span class="nav-icon">ğŸ </span>
            <span>í™ˆ</span>
        </a>
        <a href="/profile" class="nav-item" id="navProfileLink">
            <span class="nav-icon">ğŸ‘¤</span>
            <span>í”„ë¡œí•„</span>
        </a>
    </nav>

    <!-- í”„ë¡œí•„ ëª¨ë‹¬ -->
    <div id="profile-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ë‚´ í”„ë¡œí•„</h2>
            <p id="profile-info">ë¡œë”© ì¤‘...</p>
            <button id="close-profile" class="btn primary">ë‹«ê¸°</button>
        </div>
    </div>
</div>

<!-- Swiper JS (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
<script src="/static/js/main.js"></script>
<script>
    // í˜ì´ì§€ ë¡œë“œ ì¦‰ì‹œ URL íŒŒë¼ë¯¸í„°ë¥¼ í”„ë¡œí•„ ë§í¬ì— ì¶”ê°€ (ì¦‰ì‹œ ì‹¤í–‰)
    (function() {
        const urlParams = new URLSearchParams(window.location.search);
        const paramsString = urlParams.toString();
        
        console.log('í˜„ì¬ URL íŒŒë¼ë¯¸í„°:', paramsString);
        
        if (paramsString) {
            // í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í”„ë¡œí•„ ë§í¬
            const navProfileLink = document.getElementById('navProfileLink');
            if (navProfileLink) {
                navProfileLink.href = '/profile?' + paramsString;
                console.log('í”„ë¡œí•„ ë§í¬ ì—…ë°ì´íŠ¸:', navProfileLink.href);
            }
            
            // í˜ì´ì§€ ë‚´ ëª¨ë“  /profile ë§í¬ ì—…ë°ì´íŠ¸
            const allProfileLinks = document.querySelectorAll('a[href="/profile"]');
            allProfileLinks.forEach(link => {
                link.href = '/profile?' + paramsString;
                console.log('í”„ë¡œí•„ ë§í¬ ë°œê²¬ ë° ì—…ë°ì´íŠ¸:', link.href);
            });
        } else {
            console.warn('âš ï¸ URL íŒŒë¼ë¯¸í„°ê°€ ì—†ìŠµë‹ˆë‹¤!');
        }
    })();
</script>
</body>
</html>



